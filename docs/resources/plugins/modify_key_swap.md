# modify_key_swap
编辑合并模组切换键插件

开发者： [@黎愔](/contribution)

## 功能简介

该插件可以修改合并模组的切换键及在悬浮窗口中显示切换键信息

## 快速下载

:::info v1.4.5
更新日期:  2023-12-23<br/>
下载链接: [gitee](https://gitee.com/ticca/d3dx-skin-manage/releases/download/plugins/modify_key_swap_v1.4.5.zip) <br/>
:::

## 使用教程

### 加载插件
首先，也是最基础的一步——**加载插件**，请参考 [插件使用教程](/help/tutorial-plugins)

### 编辑切换键
首先，鼠标移动至要编辑切换键的模组上，鼠标右键呼出菜单，选择 **编辑 MOD 切换键**，在打开的编辑窗口修改对应参数。修改完成后，点击 `保存` 按钮即可保存对应的参数信息。

:::tip 提示
**编辑 MOD 切换键** 选项只会在模组是 **合并模组** 且 **有缓存文件** 时显示，即你需要先至启用过对应的合并模组才会显示！
:::

![](/static/image/cdaffdb7.png)

下面是窗口中各个参数的具体含义讲解：
- `Key` 和 `Back` 参数分别指 **合并模组** 的 `正向切换键` 和 `逆向切换键`，他们都是用于切换当前显示的模组的按键，有关切换键键值的具体信息，请参考 [快捷键键值](#快捷键键值)。

- `初始 mod 值` 参数指 **合并模组** 首次加载时显示的是哪一个模组，即你进入游戏后或者按 F10 后显示的模组。**合并模组** 中各模组所对应的数字是由模组作者自定义的，所有你需要在修改 `初始 mod 值` 后在游戏中刷新来确认是否为你所想要显示的模组。

- `初始 mod 值` 参数右边的参数是指按切换键时切换 **合并模组** 的顺序，每个数字对应一个模组， 每个数字键需要用 `,`(英文字符) 进行分隔。这个参数不建议新手去修改它，最好保持默认值。

### 查看 MOD 切换键
鼠标移动至要查看切换键的模组上，若模组是 **合并模组** 且 **有缓存文件** 时，悬浮窗口上会显示对应的切换键信息。

![](/static/image/b6afc1c7.png)

## 视频教程链接

[基础功能教程](https://www.bilibili.com/video/BV1sC4y197bK/)

视频教程由 [@黎愔](/contribution) 录制和提供。

## 快捷键键值
3dmigoto 中快捷键的相关取值具体如下：
- 对于键盘上可输入的单个字符，只需使用单个字符即可，如 `A-Z` 、`0-9` 、`[` 、`]` 、`;` 、`=` 等。对于其他所有键值(包括鼠标按键)，使用 `虚拟键名`( `VK_` 前缀可带可不带) 或其对应的 `十六进制代码`。具体的虚拟键名及其对应的十六进制代码请参考 [虚拟键代码](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731(v=vs.85).aspx)。

:::tip 提示
该插件 **main.py** 文件中 (22-36行) 的 **VK_keys**、**XBox_keys**、**combinations__** 变量中存储可被识别的特殊字符。由于虚拟键值过多故未全部写入，目前只包含常用的键值，如果需要可以自行补充。

![](/static/image/14ca1fb4.png)
:::

- 键值不区分大小写，`VK_UP`、`vk_up`、`vK_Up` 都是可行的。

- 可以通过 `空格` 分隔键值来指定 `组合键`，例如 `CTRL K`。也可以指定必须不按下指定按键的快捷键，例如：`NO_ALT K`，该快捷键指不按下 `Alt` 的同时按下 `k`。`NO_MODIFIERS` 是一个特殊键值，用于表示不按下所有 `标准修饰符`(`Ctrl`、 `Alt`、 `Shift`、 `Windows`)。

- 可以用以下键值表示 XBox 手柄上的对应按键：

    | 键值               | 对应按键         | 键值               | 对应按键         |
    |------------------- |-----------------|--------------------|-----------------|
    | `XB_LEFT_TRIGGER`  | 左扳机          | `XB_RIGHT_TRIGGER` | 右扳机           |
    | `XB_LEFT_SHOULDER` | 左肩键          | `XB_RIGHT_SHOULDER`| 右肩键           |
    | `XB_LEFT_THUMB`    | 左摇杆按下      | `XB_RIGHT_THUMB`   | 右摇杆按下       |
    | `XB_DPAD_UP`       | 方向键上        | `XB_DPAD_DOWN`     | 方向键下         |
    | `XB_DPAD_LEFT`     | 方向键左        | `XB_DPAD_RIGHT`    | 方向键右         |
    | `XB_A`             | A 按钮          | `XB_B`             | B 按钮           |
    | `XB_X`             | X 按钮          | `XB_Y`             | Y 按钮           |
    | `XB_START`         | 开始按钮        | `XB_BACK`          | 后退（选项）按钮  |
    | `XB_GUIDE`         | 指南按钮        |                    |                  |

## 更新日志

### v1.4.5
#### 新增
- 新增部分常用虚拟键值，新增 XBox 按键值。

### v1.4.4
#### 修改
- 同步菜单栏逻辑与主程序的菜单栏逻辑一致，避免与主程序的菜单栏产生冲突。

### v1.4.3
#### 修改
- 使用新的菜单栏逻辑。

### v1.4.2
#### 优化
- 优化对初始 mod 值的识别逻辑。

### v1.4.1
#### 修复
- 修复循环索引保存失败的问题，并优化部分功能。

### v1.4 及更早版本
#### 新增
- 在选择栏菜单栏中新增 `编辑 MOD 切换键`，可以通过其修改合并模组的切换键。

